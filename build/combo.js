!function(a,b){function c(a){if(this.v=a.v||0,this.a=a.a||0,"undefined"!=typeof a.t&&(this.t=a.t),"undefined"!=typeof a.s&&(this.s=a.s),"undefined"==typeof this.t)if("undefined"==typeof this.s)this.t=-this.v/this.a;else{var b=(Math.sqrt(this.v*this.v+2*this.a*this.s)-this.v)/this.a,c=(-Math.sqrt(this.v*this.v+2*this.a*this.s)-this.v)/this.a;this.t=Math.min(b,c)}"undefined"==typeof this.s&&(this.s=this.a*this.t*this.t/2+this.v*this.t),this.generateCubicBezier=function(){function a(a,b){return[[(a/3+(a+b)/3-a)/(b-a),(a*a/3+a*b*2/3-a*a)/(b*b-a*a)],[(b/3+(a+b)/3-a)/(b-a),(b*b/3+a*b*2/3-a*a)/(b*b-a*a)]]}return a(this.v/this.a,this.t+this.v/this.a)}}b.motion=function(a){return new c(a)}}(window,window.lib||(window.lib={}));!function(a){function b(a,b){for(var c=a;c;){if(c.contains(b)||c==b)return c;c=c.parentNode}return null}function c(a,b,c){var d=i.createEvent("HTMLEvents");if(d.initEvent(b,!0,!0),"object"==typeof c)for(var e in c)d[e]=c[e];a.dispatchEvent(d)}function d(a,b,c,d,e,f,g,h){var i=Math.atan2(h-f,g-e)-Math.atan2(d-b,c-a),j=Math.sqrt((Math.pow(h-f,2)+Math.pow(g-e,2))/(Math.pow(d-b,2)+Math.pow(c-a,2))),k=[e-j*a*Math.cos(i)+j*b*Math.sin(i),f-j*b*Math.cos(i)-j*a*Math.sin(i)];return{rotate:i,scale:j,translate:k,matrix:[[j*Math.cos(i),-j*Math.sin(i),k[0]],[j*Math.sin(i),j*Math.cos(i),k[1]],[0,0,1]]}}function e(a){0===Object.keys(l).length&&(j.addEventListener("touchmove",f,!1),j.addEventListener("touchend",g,!1),j.addEventListener("touchcancel",h,!1));for(var d=0;d<a.changedTouches.length;d++){var e=a.changedTouches[d],i={};for(var m in e)i[m]=e[m];var n={startTouch:i,startTime:Date.now(),status:"tapping",element:a.srcElement,pressingHandler:setTimeout(function(b){return function(){"tapping"===n.status&&(n.status="pressing",c(b,"press",{touchEvent:a})),clearTimeout(n.pressingHandler),n.pressingHandler=null}}(a.srcElement),500)};l[e.identifier]=n}if(2==Object.keys(l).length){var o=[];for(var m in l)o.push(l[m].element);c(b(o[0],o[1]),"dualtouchstart",{touches:k.call(a.touches),touchEvent:a})}}function f(a){for(var e=0;e<a.changedTouches.length;e++){var f=a.changedTouches[e],g=l[f.identifier];if(!g)return;g.lastTouch||(g.lastTouch=g.startTouch),g.lastTime||(g.lastTime=g.startTime),g.velocityX||(g.velocityX=0),g.velocityY||(g.velocityY=0),g.duration||(g.duration=0);var h=Date.now()-g.lastTime,i=(f.clientX-g.lastTouch.clientX)/h,j=(f.clientY-g.lastTouch.clientY)/h,k=70;h>k&&(h=k),g.duration+h>k&&(g.duration=k-h),g.velocityX=(g.velocityX*g.duration+i*h)/(g.duration+h),g.velocityY=(g.velocityY*g.duration+j*h)/(g.duration+h),g.duration+=h,g.lastTouch={};for(var m in f)g.lastTouch[m]=f[m];g.lastTime=Date.now();var n=f.clientX-g.startTouch.clientX,o=f.clientY-g.startTouch.clientY,p=Math.sqrt(Math.pow(n,2)+Math.pow(o,2));"tapping"===g.status&&p>10&&(g.status="panning",g.isVertical=!(Math.abs(n)>Math.abs(o)),c(g.element,"panstart",{touch:f,touchEvent:a,isVertical:g.isVertical}),c(g.element,(g.isVertical?"vertical":"horizontal")+"panstart",{touch:f,touchEvent:a})),"panning"===g.status&&(g.panTime=Date.now(),c(g.element,"pan",{displacementX:n,displacementY:o,touch:f,touchEvent:a,isVertical:g.isVertical}),g.isVertical?c(g.element,"verticalpan",{displacementY:o,touch:f,touchEvent:a}):c(g.element,"horizontalpan",{displacementX:n,touch:f,touchEvent:a}))}if(2==Object.keys(l).length){for(var q,r=[],s=[],t=[],e=0;e<a.touches.length;e++){var f=a.touches[e],g=l[f.identifier];r.push([g.startTouch.clientX,g.startTouch.clientY]),s.push([f.clientX,f.clientY])}for(var m in l)t.push(l[m].element);q=d(r[0][0],r[0][1],r[1][0],r[1][1],s[0][0],s[0][1],s[1][0],s[1][1]),c(b(t[0],t[1]),"dualtouch",{transform:q,touches:a.touches,touchEvent:a})}}function g(a){if(2==Object.keys(l).length){var d=[];for(var e in l)d.push(l[e].element);c(b(d[0],d[1]),"dualtouchend",{touches:k.call(a.touches),touchEvent:a})}for(var i=0;i<a.changedTouches.length;i++){var n=a.changedTouches[i],o=n.identifier,p=l[o];if(p){if(p.pressingHandler&&(clearTimeout(p.pressingHandler),p.pressingHandler=null),"tapping"===p.status&&(p.timestamp=Date.now(),c(p.element,"tap",{touch:n,touchEvent:a}),m&&p.timestamp-m.timestamp<300&&c(p.element,"doubletap",{touch:n,touchEvent:a}),m=p),"panning"===p.status){var q=Date.now()-p.startTime,r=((n.clientX-p.startTouch.clientX)/q,(n.clientY-p.startTouch.clientY)/q,n.clientX-p.startTouch.clientX),s=n.clientY-p.startTouch.clientY,t=Math.sqrt(p.velocityY*p.velocityY+p.velocityX*p.velocityX),u=Date.now(),v=t>.5&&u-(p.lastTime<10);c(p.element,"panend",{isflick:v,touch:n,touchEvent:a,isVertical:p.isVertical}),v&&(c(p.element,"flick",{duration:q,velocityX:p.velocityX,velocityY:p.velocityY,displacementX:r,displacementY:s,touch:n,touchEvent:a,isVertical:p.isVertical}),p.isVertical?c(p.element,"verticalflick",{duration:q,velocityY:p.velocityY,displacementY:s,touch:n,touchEvent:a}):c(p.element,"horizontalflick",{duration:q,velocityX:p.velocityX,displacementX:r,touch:n,touchEvent:a}))}"pressing"===p.status&&c(p.element,"pressend",{touch:n,touchEvent:a}),delete l[o]}}0===Object.keys(l).length&&(j.removeEventListener("touchmove",f,!1),j.removeEventListener("touchend",g,!1),j.removeEventListener("touchcancel",h,!1))}function h(a){if(2==Object.keys(l).length){var d=[];for(var e in l)d.push(l[e].element);c(b(d[0],d[1]),"dualtouchend",{touches:k.call(a.touches),touchEvent:a})}for(var i=0;i<a.changedTouches.length;i++){var m=a.changedTouches[i],n=m.identifier,o=l[n];o&&(o.pressingHandler&&(clearTimeout(o.pressingHandler),o.pressingHandler=null),"panning"===o.status&&c(o.element,"panend",{touch:m,touchEvent:a}),"pressing"===o.status&&c(o.element,"pressend",{touch:m,touchEvent:a}),delete l[n])}0===Object.keys(l).length&&(j.removeEventListener("touchmove",f,!1),j.removeEventListener("touchend",g,!1),j.removeEventListener("touchcancel",h,!1))}var i=a.document,j=i.documentElement,k=Array.prototype.slice,l={},m=null;j.addEventListener("touchstart",e,!1)}(window,window.lib||(window.lib={}));!function(a,b){function c(){b.scroll.outputDebugLog&&console.debug.apply(console,arguments)}function d(a){return 0-(a.options[a.axis+"Padding1"]||0)}function e(a){var b=a.element.getBoundingClientRect(),c=a.viewport.getBoundingClientRect(),e=d(a);if("y"===a.axis)var f=0-b.height+c.height;else var f=0-b.width+c.width;return Math.min(f+(a.options[a.axis+"Padding2"]||0),e)}function f(a,b){return b>a.minScrollOffset?b-a.minScrollOffset:b<a.maxScrollOffset?b-a.maxScrollOffset:void 0}function g(a,b){return b>a.minScrollOffset?b=a.minScrollOffset:b<a.maxScrollOffset&&(b=a.maxScrollOffset),b}function h(a,b,d){c(b,d);var e=l.createEvent("HTMLEvents");if(e.initEvent(b,!1,!0),e.scrollObj=a,d)for(var f in d)e[f]=d[f];a.element.dispatchEvent(e)}function i(a){var b,c={x:0,y:0},d=getComputedStyle(a.element).webkitTransform;return"none"!==d&&(b=d.match(/^matrix3d\(\d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, ([-\d.]+), ([-\d.]+), [-\d.]+, \d+\)/)||d.match(/^matrix\(\d+, \d+, \d+, \d+, ([-\d.]+), ([-\d.]+)\)$/))&&(c.x=parseInt(b[1])||0,c.y=parseInt(b[2])||0),c}function j(a,b){return q?"translate3d("+a+"px, "+b+"px, 0)":"translate("+a+"px, "+b+"px)"}function k(a,b){function k(a){return a.preventScrollendClick=C,C?(a.preventDefault(),a.stopPropagation(),!1):!0}function q(a,b){D=null,clearTimeout(E),E=setTimeout(function(){D&&(D=null,r(a))},b||400),D=a}function t(){A.enabled&&(A.isScrolling&&z(),a.style.webkitBackfaceVisibility="hidden",a.style.webkitTransformStyle="preserve-3d",a.style.webkitTransform=getComputedStyle(a).webkitTransform,a.style.webkitTransition="",D=null,clearTimeout(E))}function u(){if(A.enabled){var b=i(A)[A.axis],c=f(A,b);if(""===a.style.webkitTransition&&c){var d=g(A,b);c>0?h(A,"y"===A.axis?"pulldownend":"pullrightend"):0>c&&h(A,"y"===A.axis?"pullupend":"pullleftend"),a.style.webkitTransition="-webkit-transform 0.4s ease 0",a.style.webkitTransform="translate"+A.axis.toUpperCase()+"("+d.toFixed(0)+"px)",q(z,400),A.fireScrollingEvent&&r(function(){A.isScrolling&&A.enabled&&(h(A,"scrolling"),r(arguments.callee))})}else A.isScrolling&&z()}}function v(a){A.enabled&&(("y"===A.axis&&a.isVertical||"x"===A.axis&&!a.isVertical)&&a.stopPropagation(),A.transformOffset=i(A),A.minScrollOffset=d(A),A.maxScrollOffset=e(A),A.panFixRatio=2.5,F=!0,A.isScrolling=!0,h(A,"scrollstart"),G=a["displacement"+A.axis.toUpperCase()])}function w(b){if(A.enabled){var c=b["displacement"+A.axis.toUpperCase()];if(!(Math.abs(c-G)<5)&&(G=c,"y"===A.axis&&b.isVertical||"x"===A.axis&&!b.isVertical)){b.stopPropagation();var d=A.transformOffset[A.axis]+c;d>A.minScrollOffset?(d=A.minScrollOffset+(d-A.minScrollOffset)/A.panFixRatio,A.panFixRatio*=1.003):d<A.maxScrollOffset&&(d=A.maxScrollOffset-(A.maxScrollOffset-d)/A.panFixRatio,A.panFixRatio*=1.003),A.panFixRatio>4&&(A.panFixRatio=4);var e=f(A,d);e&&(h(A,e>0?"y"===A.axis?"pulldown":"pullright":"y"===A.axis?"pullup":"pullleft",{boundaryOffset:Math.abs(e)}),A.options.noBounce&&(d=g(A,d))),a.style.webkitTransition="",a.style.webkitTransform="y"===A.axis?j(A.transformOffset.x,d):j(d,A.transformOffset.y),A.fireScrollingEvent&&h(A,"scrolling")}}}function x(a){A.enabled&&("y"===A.axis&&a.isVertical||"x"===A.axis&&!a.isVertical)&&a.stopPropagation()}function y(d){if(A.enabled&&("y"===A.axis&&d.isVertical||"x"===A.axis&&!d.isVertical)){d.stopPropagation(),F=!0;var e,j,k,l,n,o,s,t,u,v,w,x,y,B,C,D,E;l=i(A)[A.axis];var G=f(A,l);if(!G){e=d["velocity"+A.axis.toUpperCase()];var H=2,I=.0015;b.inertia&&p[b.inertia]&&(H=p[b.inertia][0],I=p[b.inertia][1]),e>H&&(e=H),-H>e&&(e=-H),j=I*(e/Math.abs(e)),o=m({v:e,a:-j}),k=o.t,n=l+o.s;var J=f(A,n);if(J)c("惯性计算超出了边缘",J),b.noBounce?(c("没有回弹效果"),v=g(A,n),a.style.webkitTransition="-webkit-transform 0.4s ease-out 0",a.style.webkitTransform="translate"+A.axis.toUpperCase()+"("+v.toFixed(0)+"px)",q(z,400)):(s=e,t=j,J>0?(v=A.minScrollOffset,x=1):(v=A.maxScrollOffset,x=-1),w=m({v:x*s,a:-x*t,s:Math.abs(v-l)}),u=w.t,y=s-t*u,B=.03*(y/Math.abs(y)),E=m({v:y,a:-B}),C=E.t,D=v+E.s,a.style.webkitTransition="-webkit-transform "+((u+C)/1e3).toFixed(2)+"s ease-out 0",a.style.webkitTransform="translate"+A.axis.toUpperCase()+"("+D.toFixed(0)+"px)",c("惯性滚动","s="+D.toFixed(0),"t="+((u+C)/1e3).toFixed(2)),q(function(){A.enabled&&(a.style.webkitTransition="-webkit-transform 0.4s ease 0",a.style.webkitTransform="translate"+A.axis.toUpperCase()+"("+v.toFixed(0)+"px)",c("惯性回弹","s="+v.toFixed(0),"t=400"),q(z,400))},1e3*((u+C)/1e3).toFixed(2)));else{c("惯性计算没有超出了边缘");var K=o.generateCubicBezier();a.style.webkitTransition="-webkit-transform "+(k/1e3).toFixed(2)+"s cubic-bezier("+K+") 0",a.style.webkitTransform="translate"+A.axis.toUpperCase()+"("+n.toFixed(0)+"px)",q(z,1e3*(k/1e3).toFixed(2))}A.fireScrollingEvent&&r(function(){A.isScrolling&&A.enabled&&(h(A,"scrolling",{afterFlick:!0}),r(arguments.callee))})}}}function z(){A.enabled&&(F=!1,setTimeout(function(){!F&&A.enabled&&(A.isScrolling=!1,a.style.webkitTransition="",h(A,"scrollend"))},50))}var A=this;if(b=b||{},b.noBounce=!!b.noBounce,b.padding=b.padding||{},b.isPrevent=null==b.isPrevent?!0:!!b.isPrevent,b.isFixScrollendClick=null==b.isFixScrollendClick?!0:!!b.isFixScrollendClick,b.padding&&(b.yPadding1=-b.padding.top||0,b.yPadding2=-b.padding.bottom||0,b.xPadding1=-b.padding.left||0,b.xPadding2=-b.padding.right||0),b.direction=b.direction||"y",b.inertia=b.inertia||"normal",this.options=b,A.axis=b.direction,this.element=a,this.viewport=a.parentNode,this.plugins={},this.viewport.addEventListener("touchstart",t,!1),this.viewport.addEventListener("touchend",u,!1),this.viewport.addEventListener("touchcancel",u,!1),this.viewport.addEventListener("panstart",v,!1),this.viewport.addEventListener("pan",w,!1),this.viewport.addEventListener("panend",x,!1),this.viewport.addEventListener("flick",y,!1),this.element.scrollId=setTimeout(function(){n[A.element.scrollId+""]=A},1),b.isPrevent){var B="y"===this.axis?"vertical":"horizontal";this.viewport.addEventListener(B+"panstart",function(){s=!0},!1),A.viewport.addEventListener("panend",function(){s=!1},!1)}if(b.isFixScrollendClick){var C;this.viewport.addEventListener("touchstart",function(){A.isScrolling&&(C=!0)},!1),this.viewport.addEventListener("scrollend",function(){setTimeout(function(){C=!1},400)},!1),this.viewport.addEventListener("click",k,!1),this.viewport.addEventListener("tap",k,!1)}var D,E=0;a.addEventListener("webkitTransitionEnd",function(a){if(D){var b=D;D=null,clearTimeout(E),r(function(){b(a)})}},!1);var F,G,H={init:function(){return this.enable(),this.refresh(),this.scrollTo(0),this},enable:function(){return this.enabled=!0,this},disable:function(){var a=this.element;return this.enabled=!1,A.isScrolling=!1,r(function(){a.style.webkitTransform=getComputedStyle(a).webkitTransform}),this},getScrollWidth:function(){return this.element.getBoundingClientRect().width-(this.options.xPadding1||0)-(this.options.xPadding2||0)},getScrollHeight:function(){return this.element.getBoundingClientRect().height-(this.options.yPadding1||0)-(this.options.yPadding2||0)},getScrollLeft:function(){return-i(this).x-(this.options.xPadding1||0)},getScrollTop:function(){return-i(this).y-(this.options.yPadding1||0)},getMaxScrollLeft:function(){return-A.maxScrollOffset-(this.options.xPadding1||0)},getMaxScrollTop:function(){return-A.maxScrollOffset-(this.options.yPadding1||0)},getBoundaryOffset:function(){return Math.abs(f(this,i(this)[this.axis])||0)},refresh:function(){var a=this.element,b="y"===this.axis,c=b?"height":"width";if(this.options.height||this.options.width)a.style[c]=this.options[c]+"px";else{if(a.childElementCount>0){var f=a.firstElementChild,g=a.lastElementChild;if(f&&g){for(;f&&0===f.getBoundingClientRect()[c]&&f.nextElementSibling;)f=f.nextElementSibling;for(;g&&g!==f&&0===g.getBoundingClientRect()[c]&&g.previousElementSibling;)g=g.previousElementSibling;a.style[c]=g.getBoundingClientRect()[b?"bottom":"right"]-f.getBoundingClientRect()[b?"top":"left"]+"px"}else a.style[c]="0"}else a.style[c]="auto",a.style[c]=a.getBoundingClientRect()[c]+"px"}return this.transformOffset=i(this),this.minScrollOffset=d(this),this.maxScrollOffset=e(this),this.scrollTo(-this.transformOffset[this.axis]-(this.options[this.axis+"Padding1"]||0)),this},offset:function(a){var b=this.element.getBoundingClientRect(),c=a.getBoundingClientRect();if("y"===this.axis){var d={top:c.top-((this.options.yPadding1||0)+b.top),left:c.left-b.left,right:b.right-c.right,width:c.width,height:c.height};d.bottom=d.top+d.height}else{var d={top:c.top-b.top,bottom:b.bottom-c.bottom,left:c.left-((this.options.xPadding1||0)+b.left),width:c.width,height:c.height};d.right=d.left+d.width}return d},getRect:function(a){var b=this.viewport.getBoundingClientRect(),c=a.getBoundingClientRect();if("y"===this.axis){var d={top:c.top-((this.options.yPadding1||0)+b.top),left:c.left-b.left,right:b.right-c.right,width:c.width,height:c.height};d.bottom=d.top+d.height}else{var d={top:c.top-b.top,bottom:b.bottom-c.bottom,left:c.left-((this.options.xPadding1||0)+b.left),width:c.width,height:c.height};d.right=d.left+d.width}return d},isInView:function(a){var b=this.viewport.getBoundingClientRect(),c=this.getRect(a);return"y"===this.axis?b.top<c.bottom&&b.bottom>c.top:b.left<c.right&&b.right>c.left},scrollTo:function(a,b){var c=this.element;return a=-a-(this.options[this.axis+"Padding1"]||0),a=g(this,a),b===!0?(c.style.webkitTransition="-webkit-transform 0.4s ease 0",q(z,400)):c.style.webkitTransition="",c.style.webkitTransform="y"===this.axis?j(i(this).x,a):j(a,i(this).y),this},scrollToElement:function(a,b){var c=this.offset(a);return this.scrollTo("y"===this.axis?c.top:c.left,b)},getViewWidth:function(){return this.viewport.getBoundingClientRect().width},getViewHeight:function(){return this.viewport.getBoundingClientRect().height},addPulldownHandler:function(a){var b=this;return this.element.addEventListener("pulldownend",function(c){b.disable(),a(c,function(){b.scrollTo(0,!0),b.enable()})},!1),this},addPullupHandler:function(a){var b=this;return this.element.addEventListener("pullupend",function(c){b.disable(),a(c,function(){b.scrollTo(b.getScrollHeight(),!0),b.enable()})},!1),this},addScrollstartHandler:function(a){return this.element.addEventListener("scrollstart",function(b){a(b)},!1),this},addScrollingHandler:function(a){if(!this.fireScrollingEvent){this.fireScrollingEvent=!0;var b=l.createElement("div");b.className="force-refresh",b.style.cssText="position: absolute; top: 0; left: 0; width: 0; height: 0; font-size: 0; opacity: 1;",this.viewport.appendChild(b),this.element.addEventListener("scrolling",function(){b.style.opacity=Math.abs(parseInt(b.style.opacity)-1)+""},!1)}return this.element.addEventListener("scrolling",function(b){a(b)},!1),this},addScrollendHandler:function(a){return this.element.addEventListener("scrollend",function(b){a(b)},!1),this},enablePlugin:function(a,b){var c=o[a];return c&&!this.plugins[a]&&(this.plugins[a]=!0,b=b||{},c.call(this,a,b)),this}};for(var I in H)this[I]=H[I];delete H}var l=a.document,m=b.motion,n={},o={},p={normal:[2,.0015],slow:[1.5,.003],veryslow:[1.5,.005]},q="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(a){setTimeout(a,16)}}(),s=!1;l.addEventListener("touchmove",function(a){return s?(a.preventDefault(),!1):!0},!1),b.scroll=function(a,b){if(1===arguments.length&&!(arguments[0]instanceof HTMLElement))if(b=arguments[0],b.scrollElement)a=b.scrollElement;else{if(!b.scrollWrap)throw new Error("no scroll element");a=b.scrollWrap.firstElementChild}if(!a.parentNode)throw new Error("wrong dom tree");if(b&&b.direction&&["x","y"].indexOf(b.direction)<0)throw new Error("wrong direction");var c;return c=a.scrollId?n[a.scrollId]:new k(a,b)},b.scroll.plugin=function(a,b){return b?(a=a.split(","),a.forEach(function(a){o[a]=b}),void 0):o[a]}}(window,window.lib||(window.lib={}));