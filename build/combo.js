!function(a){function b(a,b){for(var c=a;c;){if(c.contains(b)||c==b)return c;c=c.parentNode}return null}function c(a,b,c){var d=i.createEvent("HTMLEvents");if(d.initEvent(b,!0,!0),"object"==typeof c)for(var e in c)d[e]=c[e];a.dispatchEvent(d)}function d(a,b,c,d,e,f,g,h){var i=Math.atan2(h-f,g-e)-Math.atan2(d-b,c-a),j=Math.sqrt((Math.pow(h-f,2)+Math.pow(g-e,2))/(Math.pow(d-b,2)+Math.pow(c-a,2))),k=[e-j*a*Math.cos(i)+j*b*Math.sin(i),f-j*b*Math.cos(i)-j*a*Math.sin(i)];return{rotate:i,scale:j,translate:k,matrix:[[j*Math.cos(i),-j*Math.sin(i),k[0]],[j*Math.sin(i),j*Math.cos(i),k[1]],[0,0,1]]}}function e(a){0===Object.keys(l).length&&(j.addEventListener("touchmove",f,!1),j.addEventListener("touchend",g,!1),j.addEventListener("touchcancel",h,!1));for(var d=0;d<a.changedTouches.length;d++){var e=a.changedTouches[d],i={};for(var m in e)i[m]=e[m];var n={startTouch:i,startTime:Date.now(),status:"tapping",element:a.srcElement,pressingHandler:setTimeout(function(b){return function(){"tapping"===n.status&&(n.status="pressing",c(b,"press",{touchEvent:a})),clearTimeout(n.pressingHandler),n.pressingHandler=null}}(a.srcElement),500)};l[e.identifier]=n}if(2==Object.keys(l).length){var o=[];for(var m in l)o.push(l[m].element);c(b(o[0],o[1]),"dualtouchstart",{touches:k.call(a.touches),touchEvent:a})}}function f(a){for(var e=0;e<a.changedTouches.length;e++){var f=a.changedTouches[e],g=l[f.identifier];if(!g)return;var h=f.clientX-g.startTouch.clientX,i=f.clientY-g.startTouch.clientY,j=Math.sqrt(Math.pow(h,2)+Math.pow(i,2));"tapping"===g.status&&j>10&&(g.status="panning",c(g.element,"panstart",{touch:f,touchEvent:a}),Math.abs(h)>Math.abs(i)?(c(g.element,"horizontalpanstart",{touch:f,touchEvent:a}),g.isVertical=!1):(c(g.element,"verticalpanstart",{touch:f,touchEvent:a}),g.isVertical=!0)),"panning"===g.status&&(g.panTime=Date.now(),c(g.element,"pan",{displacementX:h,displacementY:i,touch:f,touchEvent:a}),g.isVertical?c(g.element,"verticalpan",{displacementY:i,touch:f,touchEvent:a}):c(g.element,"horizontalpan",{displacementX:h,touch:f,touchEvent:a}))}if(2==Object.keys(l).length){for(var k,m=[],n=[],o=[],e=0;e<a.touches.length;e++){var f=a.touches[e],g=l[f.identifier];m.push([g.startTouch.clientX,g.startTouch.clientY]),n.push([f.clientX,f.clientY])}for(var p in l)o.push(l[p].element);k=d(m[0][0],m[0][1],m[1][0],m[1][1],n[0][0],n[0][1],n[1][0],n[1][1]),c(b(o[0],o[1]),"dualtouch",{transform:k,touches:a.touches,touchEvent:a})}}function g(a){if(2==Object.keys(l).length){var d=[];for(var e in l)d.push(l[e].element);c(b(d[0],d[1]),"dualtouchend",{touches:k.call(a.touches),touchEvent:a})}for(var i=0;i<a.changedTouches.length;i++){var n=a.changedTouches[i],o=n.identifier,p=l[o];if(p){if(p.pressingHandler&&(clearTimeout(p.pressingHandler),p.pressingHandler=null),"tapping"===p.status&&(p.timestamp=Date.now(),c(p.element,"tap",{touch:n,touchEvent:a}),m&&p.timestamp-m.timestamp<300&&c(p.element,"doubletap",{touch:n,touchEvent:a}),this.lastTap=p),"panning"===p.status){var q=Date.now()-p.startTime,r=(n.clientX-p.startTouch.clientX)/q,s=(n.clientY-p.startTouch.clientY)/q,t=n.clientX-p.startTouch.clientX,u=n.clientY-p.startTouch.clientY;c(p.element,"panend",{isflick:300>q,touch:n,touchEvent:a}),300>q&&(c(p.element,"flick",{duration:q,velocityX:r,velocityY:s,displacementX:t,displacementY:u,touch:n,touchEvent:a}),p.isVertical?c(p.element,"verticalflick",{duration:q,velocityY:s,displacementY:u,touch:n,touchEvent:a}):c(p.element,"horizontalflick",{duration:q,velocityX:r,displacementX:t,touch:n,touchEvent:a}))}"pressing"===p.status&&c(p.element,"pressend",{touch:n,touchEvent:a}),delete l[o]}}0===Object.keys(l).length&&(j.removeEventListener("touchmove",f,!1),j.removeEventListener("touchend",g,!1),j.removeEventListener("touchcancel",h,!1))}function h(a){if(2==Object.keys(l).length){var d=[];for(var e in l)d.push(l[e].element);c(b(d[0],d[1]),"dualtouchend",{touches:k.call(a.touches),touchEvent:a})}for(var i=0;i<a.changedTouches.length;i++){var m=a.changedTouches[i],n=m.identifier,o=l[n];o&&(o.pressingHandler&&(clearTimeout(o.pressingHandler),o.pressingHandler=null),"panning"===o.status&&c(o.element,"panend",{touch:m,touchEvent:a}),"pressing"===o.status&&c(o.element,"pressend",{touch:m,touchEvent:a}),delete l[n])}0===Object.keys(l).length&&(j.removeEventListener("touchmove",f,!1),j.removeEventListener("touchend",g,!1),j.removeEventListener("touchcancel",h,!1))}var i=a.document,j=i.documentElement,k=Array.prototype.slice,l={},m=null;j.addEventListener("touchstart",e,!1)}(window,window.lib||(window.lib={}));!function(a,b){function c(a){this.v="v"in a?a.v:0,this.a="a"in a?a.a:0,"t"in a?this.t=a.t:"s"in a?this.t=Math.sqrt((this.v*this.v+2*this.a*this.s)/(this.a*this.a))-this.v/this.a:this.v/this.a<0&&(this.t=-this.v/this.a),this.s="s"in a?a.s:this.a*this.t*this.t/2+this.v*this.t,this.generateCubicBezier=function(){function a(a,b){return[[(a/3+(a+b)/3-a)/(b-a),(a*a/3+a*b*2/3-a*a)/(b*b-a*a)],[(b/3+(a+b)/3-a)/(b-a),(b*b/3+a*b*2/3-a*a)/(b*b-a*a)]]}return a(this.v/this.a,this.t+this.v/this.a)}}b.createMotion=function(a){return new c(a)}}(window,window.lib||(window.lib={}));!function(a,b){function c(a){return 0-(a.bounceTop||0)}function d(a){var b=a.getBoundingClientRect(),d=a.parentNode.getBoundingClientRect(),e=c(a),f=0-b.height+d.height;return Math.min(f+(a.bounceBottom||0),e)}function e(a,b){return b>a.minScrollTop?b-a.minScrollTop:b<a.maxScrollTop?a.maxScrollTop-b:void 0}function f(a,b,c){var d=k.createEvent("HTMLEvents");d.initEvent(b,!0,!0);for(var e in c)d[e]=c[e];a.dispatchEvent(d)}function g(a){var b,c,d=/^matrix3d\(\d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, ([-\d.]+), ([-\d.]+), [-\d.]+, \d+\)/,e=/^matrix\(\d+, \d+, \d+, \d+, ([-\d.]+), ([-\d.]+)\)$/,f={x:0,y:0},g=getComputedStyle(a).webkitTransform;return"none"!==g&&(c=g.indexOf("matrix3d")>-1?d:e,(b=g.match(c))&&(f.x=parseInt(b[1])||0,f.y=parseInt(b[2])||0)),f}function h(a){function b(){g(a);a.style.webkitBackfaceVisibility="hidden",a.style.webkitTransformStyle="preserve-3d",a.style.webkitTransform=getComputedStyle(a).webkitTransform,a.style.webkitAnimation="",a.removeEventListener("animationend",p,!1)}function h(){var b=g(a).y;if(""===a.style.webkitAnimation&&(b>a.minScrollTop||b<a.maxScrollTop)){if(b>a.minScrollTop)var c=a.minScrollTop;else var c=a.maxScrollTop;j&&j.parentNode.removeChild(j),j=document.createElement("style"),j.innerHTML="@-webkit-keyframes bounce {  0% {-webkit-transform:translateY("+b+"px)}\n100%{ -webkit-transform:translateY("+c.toFixed(0)+"px);animation-timing-function:ease  } }",document.getElementsByTagName("head")[0].appendChild(j),a.style.webkitAnimation="bounce 0.4s",a.style.webkitTransform="translateY("+c+"px)",a.addEventListener("animationend",p,!1)}}function i(){!stopBounce&&a&&(a.transformOffset=g(a),a.minScrollTop=c(a),a.maxScrollTop=d(a),m=2.5,stopBounce=!1,n=!1,f(a,"scrollstart"))}function k(b){if(!stopBounce&&a){var c=a.transformOffset.y+b.displacementY;if(c>a.minScrollTop?(c=a.minScrollTop+(c-a.minScrollTop)/m,m*=1.003,m>4&&(m=4)):c<a.maxScrollTop&&(c=a.maxScrollTop-(a.maxScrollTop-c)/m,m*=1.003,m>4&&(m=4)),e(a,c)){if(c>a.minScrollTop)var d="pulldown",g=Math.abs(c-a.minScrollTop);else if(c<a.maxScrollTop)var d="pullup",g=Math.abs(a.maxScrollTop-c);a.bounceOffset=g,f(a,d)}a.style.webkitTransition="",a.style.webkitTransform="translate3d("+[a.transformOffset.x,c,0]+")"}}function l(){}function o(b){function c(a,b){return[[(a/3+(a+b)/3-a)/(b-a),(a*a/3+a*b*2/3-a*a)/(b*b-a*a)],[(b/3+(a+b)/3-a)/(b-a),(b*b/3+a*b*2/3-a*a)/(b*b-a*a)]]}function d(a,b,c,d){a.bezierCurveTo(w+b[0][0]*(c-w),x+b[0][1]*(d-x)+300,w+b[1][0]*(c-w),x+b[1][1]*(d-x)+300,c,d+300),w=c,x=d,a.stroke(),a.beginPath(),a.moveTo(w,x+300)}if(!stopBounce&&a){var e,f,h,i,k=g(a).y;if(n=!0,k>a.minScrollTop||k<a.maxScrollTop);else if(e=b.velocityY,e>1.5&&(e=1.5),-1.5>e&&(e=-1.5),f=.0015*(e/Math.abs(e)),h=e/f,i=k+h*e/2,i>a.minScrollTop||i<a.maxScrollTop){var l=e;if(i>a.minScrollTop)var m=a.minScrollTop,o=1;else var m=a.maxScrollTop,o=-1;var q=(o*l-Math.sqrt(-2*f*Math.abs(m-k)+l*l))/f,r=l-f*q,s=.008*(r/Math.abs(r)),t=r/s,u=m+r*t/2,v=q+t+400,w=0,x=0,y=document.querySelector("canvas"),z=y.getContext("2d");z.clearRect(0,0,800,800),z.strokeStyle="black",z.beginPath(),z.moveTo(0,300),console.log({t1:q,t2:t}),z.strokeStyle="blue",d(z,c(-q-l/f/2,-t-l/f/2),q/v*300+2,m-k),z.strokeStyle="red",d(z,c(-t-r/s/2,0),(q+t)/v*300,u-k),j&&j.parentNode.removeChild(j),j=document.createElement("style"),j.innerHTML="@-webkit-keyframes bounce {  0% {-webkit-transform:translateY("+k+"px)}\n"+(q/v*100).toFixed(1)+"% {-webkit-transform:translateY("+m.toFixed(0)+"px);animation-timing-function:cubic-bezier("+c(-q-l/f/2,-t-l/f/2)+")}\n"+((q+t)/v*100).toFixed(1)+"% {-webkit-transform:translateY("+u.toFixed(0)+"px);animation-timing-function:cubic-bezier("+c(-t-r/s/2,0)+")}\n100%{ -webkit-transform:translateY("+m.toFixed(0)+"px);animation-timing-function:ease  } }",document.getElementsByTagName("head")[0].appendChild(j),a.style.webkitAnimation="bounce "+(v/1e3).toFixed(2)+"s",a.style.webkitTransform="translateY("+m+"px)",a.addEventListener("animationend",p,!1)}else j&&j.parentNode.removeChild(j),j=document.createElement("style"),j.innerHTML="@-webkit-keyframes bounce {  0% {-webkit-transform:translateY("+k+"px)}\n100% {-webkit-transform:translateY("+i.toFixed(0)+"px);animation-timing-function:cubic-bezier("+c(-h,0)+")}\n }",document.getElementsByTagName("head")[0].appendChild(j),a.style.webkitAnimation="bounce "+(h/1e3).toFixed(2)+"s",a.style.webkitTransform="translateY("+i+"px)",a.addEventListener("animationend",p,!1)}}function p(){!stopBounce&&a&&(n=!1,setTimeout(function(){!n&&a&&(a.style.webkitBackfaceVisibility="initial",a.style.webkitTransformStyle="flat",a.style.webkitTransition="",f(a,"scrollend"))},10))}var q=a.parentElement;q.boundScrollEvent=!0,q.addEventListener("touchstart",b,!1),q.addEventListener("touchend",h,!1),q.addEventListener("panstart",i,!1),q.addEventListener("pan",k,!1),q.addEventListener("panend",l,!1),q.addEventListener("flick",o,!1)}var i,j=null,k=a.document,l=(k.documentElement,b.animation),m=2,n=!1;stopBounce=!1,prevented=!1;var o={enable:function(a){new h(a)},disable:function(a){var b,c=a.parentNode||a.offsetParent;c.boundScrollElement===a&&(b=g(a),i=c.boundScrollElement=null,setTimeout(function(){a.style.webkitTransition="",a.style.webkitTransform="translate3d("+[b.x,b.y]+",0)"},50))},getScrollHeight:function(a){return a.getBoundingClientRect().height-(a.bounceTop||0)-(a.bounceBottom||0)},getScrollTop:function(a){var b=g(a);return-(b.y+(a.bounceTop||0))},refresh:function(a){a.style.height="auto",a.style.height=a.offsetHeight+"px",a.minScrollTop=c(a),a.maxScrollTop=d(a)},offset:function(a,b){var c=a.getBoundingClientRect(),d=b.getBoundingClientRect(),e={top:d.top-((a.bounceTop||0)+c.top),left:d.left-c.left,right:c.right-d.right,width:d.width,height:d.height};return e.bottom=e.top+d.height,e},scrollTo:function(){},scrollToElement:function(a,b){var c=this.offset(a,b);this.scrollTo(a,c.top)},getViewHeight:function(a){return a.parentNode.getBoundingClientRect().height},getBoundaryOffset:function(a){var b=g(a).y;return e(a,b)},stopBounce:function(a){stopBounce=!0;var b=g(a),e=c(a),f=d(a),h=null;b.y>e+(a.bounceTop||0)?h=e+(a.bounceTop||0):b.y<f-(a.bounceBottom||0)&&(h=f-(a.bounceBottom||0))},resumeBounce:function(a){stopBounce=!1;var b,e=l.getTransformOffset(a),f=c(a),g=d(a);e.y>f?b=f:g>e&&(b=g)}};b.scroll=o}(window,window.lib||(window.lib={}));