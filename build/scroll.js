!function(a,b){function c(a){return 0-(a.options.bounceOffset.top||0)}function d(a){var b=a.element.getBoundingClientRect(),d=a.element.parentNode.getBoundingClientRect(),e=c(a),f=0-b.height+d.height;return Math.min(f+(a.options.bounceOffset.bottom||0),e)}function e(a,b){return b>a.minScrollTop?b-a.minScrollTop:b<a.maxScrollTop?b-a.maxScrollTop:void 0}function f(a,b){return b>a.minScrollTop?b=a.minScrollTop:b<a.maxScrollTop&&(b=a.maxScrollTop),b}function g(a,b,c){var d=j.createEvent("HTMLEvents");d.initEvent(b,!0,!0),d.scrollObj=a;for(var e in c)d[e]=c[e];a.element.dispatchEvent(d)}function h(a){var b,c={x:0,y:0},d=getComputedStyle(a.element).webkitTransform;return"none"!==d&&(b=d.match(/^matrix3d\(\d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, ([-\d.]+), ([-\d.]+), [-\d.]+, \d+\)/)||d.match(/^matrix\(\d+, \d+, \d+, \d+, ([-\d.]+), ([-\d.]+)\)$/))&&(c.x=parseInt(b[1])||0,c.y=parseInt(b[2])||0),c}function i(a,b){function i(){s.enabled&&!s.isStopBounce&&(s.offset=h(s),a.style.webkitBackfaceVisibility="hidden",a.style.webkitTransformStyle="preserve-3d",a.style.webkitTransform=getComputedStyle(a).webkitTransform,a.style.webkitAnimation="",a.removeEventListener("webkitAnimationEnd",r,!1))}function j(){if(s.enabled&&!s.isStopBounce){var b=h(s).y;if(""===a.style.webkitAnimation&&e(s,b)){var c=f(s,b);k.parentNode||document.getElementsByTagName("head")[0].appendChild(k);var d="bounce-"+s.viewport.scrollId+"-"+Date.now();k.innerHTML="@-webkit-keyframes "+d+" {0% {-webkit-transform:translateY("+b.toFixed(0)+"px)}100% {-webkit-transform:translateY("+c.toFixed(0)+"px);animation-timing-function:ease}}",a.style.webkitAnimation=d+" 0.4s",a.style.webkitTransform="translateY("+c.toFixed(0)+"px)",a.addEventListener("webkitAnimationEnd",r,!1)}}}function m(){s.enabled&&!s.isStopBounce&&(s.transformOffset=h(s),s.minScrollTop=c(s),s.maxScrollTop=d(s),s.panFixRatio=2.5,s.isStopBounce=!1,s.cancelScrollEnd=!1,g(s,"scrollstart"))}function o(b){if(s.enabled&&!s.isStopBounce){var c=s.transformOffset.y+b.displacementY;c>s.minScrollTop?(c=s.minScrollTop+(c-s.minScrollTop)/s.panFixRatio,s.panFixRatio*=1.003):c<s.maxScrollTop&&(c=s.maxScrollTop-(s.maxScrollTop-c)/s.panFixRatio,s.panFixRatio*=1.003),s.panFixRatio>4&&(s.panFixRatio=4);var d,f=e(s,c);f?(d=f>0?"pulldown":"pullup",s.bounceOffset=Math.abs(f),g(s,d)):s.bounceOffset=0,a.style.webkitAnimation="",a.style.webkitTransform="translate3d("+[s.transformOffset.x+"px",c+"px",0]+")"}}function p(){!s.enabled||s.isStopBounce}function q(b){if(s.enabled&&!s.isStopBounce){s.cancelScrollEnd=!0;var c,d,f,g,i,j,m,n,o,p,q,t,u,v,w;g=h(s).y;var x=e(s,g);if(!x){c=b.velocityY,c>1.5&&(c=1.5),-1.5>c&&(c=-1.5),d=.0015*(c/Math.abs(c)),f=c/d,n=g+f*c/2;var y=e(s,n);if(y){i=c,j=d,y>0?(u=s.minScrollTop,o=1):(u=s.maxScrollTop,o=-1),m=(o*i-Math.sqrt(-2*j*Math.abs(u-g)+i*i))/j,p=i-j*m,q=.008*(p/Math.abs(p)),t=p/q,v=u+p*t/2,w=m+t+400,k.parentNode||document.getElementsByTagName("head")[0].appendChild(k);var z="bounce-"+s.viewport.scrollId+"-"+Date.now(),A=l({v:i,a:j,t:m}).generateCubicBezier(),B=l({v:p,a:q,t:t}).generateCubicBezier();k.innerHTML="@-webkit-keyframes "+z+" {0% {-webkit-transform:translateY("+g.toFixed(0)+"px)}"+(m/w*100).toFixed(1)+"% {-webkit-transform:translateY("+u.toFixed(0)+"px);animation-timing-function:cubic-bezier("+A+")}"+((m+t)/w*100).toFixed(1)+"% {-webkit-transform:translateY("+v.toFixed(0)+"px);animation-timing-function:cubic-bezier("+B+")}100% { -webkit-transform:translateY("+u.toFixed(0)+"px);animation-timing-function:ease}}",a.style.webkitAnimation=z+" "+(w/1e3).toFixed(2)+"s",a.style.webkitTransform="translateY("+u.toFixed(0)+"px)",a.addEventListener("webkitAnimationEnd",r,!1)}else{k.parentNode||document.getElementsByTagName("head")[0].appendChild(k);var z="bounce-"+s.viewport.scrollId+"-"+Date.now(),C=l({t:f}).generateCubicBezier();k.innerHTML="@-webkit-keyframes "+z+" {0% {-webkit-transform:translateY("+g.toFixed(0)+"px)}100% {-webkit-transform:translateY("+n.toFixed(0)+"px);animation-timing-function:cubic-bezier("+C+")}}",a.style.webkitAnimation=z+" "+(f/1e3).toFixed(2)+"s",a.style.webkitTransform="translateY("+n.toFixed(0)+"px)",a.addEventListener("webkitAnimationEnd",r,!1)}}}}function r(){s.enabled&&!s.isStopBounce&&(s.cancelScrollEnd=!1,setTimeout(function(){s.cancelScrollEnd||(a.style.webkitBackfaceVisibility="",a.style.webkitTransformStyle="",a.style.webkitAnimation="",g(s,"scrollend"))},10))}var s=this;b=b||{},b.bounceOffset=b.bounceOffset||{top:0,bottom:0},this.options=b,this.element=a,this.viewport=a.parentNode,this.viewport.addEventListener("touchstart",i,!1),this.viewport.addEventListener("touchend",j,!1),this.viewport.addEventListener("panstart",m,!1),this.viewport.addEventListener("pan",o,!1),this.viewport.addEventListener("panend",p,!1),this.viewport.addEventListener("flick",q,!1),this.viewport.scrollId=setTimeout(function(){n[s.viewport.scrollId+""]=s},0)}var j=a.document,k=(j.documentElement,j.createElement("style")),l=b.motion,m=!1,n={},o={enable:function(){this.enabled=!0,m&&(m=!0,j.addEventListener("touchmove",function(a){return a.preventDefault(),!1},!1))},disable:function(){var a=this.element;this.enabled=!1,setTimeout(function(){a.style.webkitTransform=getComputedStyle(a).webkitTransform,a.style.webkitAnimation=""},50)},getScrollHeight:function(a){return a.getBoundingClientRect().height-(a.bounceTop||0)-(a.bounceBottom||0)},getScrollTop:function(a){var b=h(a);return-(b.y+(a.bounceTop||0))},refresh:function(){var a=this.element;a.style.height="auto",a.style.height=a.offsetHeight+"px",this.transformOffset=h(this),this.minScrollTop=c(this),this.maxScrollTop=d(this),this.scrollTo(-this.transformOffset.y-(this.options.bounceOffset.top||0))},offset:function(a,b){var c=a.getBoundingClientRect(),d=b.getBoundingClientRect(),e={top:d.top-((a.bounceTop||0)+c.top),left:d.left-c.left,right:c.right-d.right,width:d.width,height:d.height};return e.bottom=e.top+d.height,e},scrollTo:function(a){var b=this.element,c=h(this).x;a=-a-(this.options.bounceOffset.top||0),a=f(this,a),b.style.webkitAnimation="",b.style.webkitTransform="translate3d("+[c+"px",a+"px",0]+")"},scrollToElement:function(a,b){var c=this.offset(a,b);this.scrollTo(a,c.top)},getViewHeight:function(a){return a.parentNode.getBoundingClientRect().height},getBoundaryOffset:function(){var a=h(this).y;return Math.abs(e(this,a))},stopBounce:function(a){isStopBounce=!0;var b=h(a),e=c(a),f=d(a),g=null;b.y>e+(a.bounceTop||0)?g=e+(a.bounceTop||0):b.y<f-(a.bounceBottom||0)&&(g=f-(a.bounceBottom||0))},resumeBounce:function(a){isStopBounce=!1;var b,e=anim.getTransformOffset(a),f=c(a),g=d(a);e.y>f?b=f:g>e&&(b=g)}};for(var p in o)i.prototype[p]=o[p];b.scroll=function(a,b){if(!a.parentElement)throw new Error("wrong dom tree");var c;return c=a.parentElement.scrollId?n[a.parentElement.scrollId]:new i(a,b),c.enable(),c.refresh(),c}}(window,window.lib||(window.lib={}));