!function(a,b){function c(a){return 0-(a.options.bounceOffset.top||0)}function d(a){var b=a.element.getBoundingClientRect(),d=a.element.parentNode.getBoundingClientRect(),e=c(a),f=0-b.height+d.height;return Math.min(f+(a.options.bounceOffset.bottom||0),e)}function e(a,b){return b>a.minScrollTop?b-a.minScrollTop:b<a.maxScrollTop?b-a.maxScrollTop:void 0}function f(a,b){return b>a.minScrollTop?b=a.minScrollTop:b<a.maxScrollTop&&(b=a.maxScrollTop),b}function g(a,b){var c=k.createEvent("HTMLEvents");c.initEvent(b,!0,!0),c.scrollObj=a,a.element.dispatchEvent(c)}function h(a){var b,c={x:0,y:0},d=getComputedStyle(a.element).webkitTransform;return"none"!==d&&(b=d.match(/^matrix3d\(\d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, ([-\d.]+), ([-\d.]+), [-\d.]+, \d+\)/)||d.match(/^matrix\(\d+, \d+, \d+, \d+, ([-\d.]+), ([-\d.]+)\)$/))&&(c.x=parseInt(b[1])||0,c.y=parseInt(b[2])||0),c}function i(a,b){return o?"translate3d("+a+"px, "+b+"px, 0)":"translate("+a+"px, "+b+"px)"}function j(a,b){function j(b){s.enabled&&!s.isStopBounce&&b.currentTarget==s.viewport&&(s.offset=h(s),a.style.webkitBackfaceVisibility="hidden",a.style.webkitTransformStyle="preserve-3d",a.style.webkitTransform=getComputedStyle(a).webkitTransform,a.style.webkitTransition="",a.style.webkitAnimation="",a.removeEventListener("webkitTransitionEnd",r),a.removeEventListener("webkitAnimationEnd",r))}function k(b){if(s.enabled&&!s.isStopBounce&&b.currentTarget==s.viewport){var c=h(s).y;if(""===a.style.webkitTransition&&""===a.style.webkitAnimation&&e(s,c)){var d=f(s,c);a.style.webkitTransition="-webkit-transform 0.4s ease 0",a.style.webkitTransform="translateY("+d.toFixed(0)+"px)",a.addEventListener("webkitTransitionEnd",r,!1)}}}function m(a){s.enabled&&!s.isStopBounce&&(a.stopPropagation(),s.transformOffset=h(s),s.minScrollTop=c(s),s.maxScrollTop=d(s),s.panFixRatio=2.5,s.isStopBounce=!1,s.cancelScrollEnd=!1,g(s,"scrollstart"))}function o(b){if(s.enabled&&!s.isStopBounce){b.stopPropagation();var c=s.transformOffset.y+b.displacementY;c>s.minScrollTop?(c=s.minScrollTop+(c-s.minScrollTop)/s.panFixRatio,s.panFixRatio*=1.003):c<s.maxScrollTop&&(c=s.maxScrollTop-(s.maxScrollTop-c)/s.panFixRatio,s.panFixRatio*=1.003),s.panFixRatio>4&&(s.panFixRatio=4);var d,f=e(s,c);f?(d=f>0?"pulldown":"pullup",s.bounceOffset=Math.abs(f),g(s,d)):s.bounceOffset=0,a.style.webkitAnimation="",a.style.webkitTransform=i(s.transformOffset.x,c)}}function p(a){s.enabled&&!s.isStopBounce&&a.stopPropagation()}function q(b){if(s.enabled&&!s.isStopBounce){b.stopPropagation(),s.cancelScrollEnd=!0;var c,d,f,g,i,j,k,m,n,o,p,q,t,u,v;g=h(s).y;var w=e(s,g);if(!w){c=b.velocityY,c>1.5&&(c=1.5),-1.5>c&&(c=-1.5),d=.0015*(c/Math.abs(c)),f=c/d,i=g+f*c/2;var x=e(s,i);if(x){j=c,k=d,x>0?(n=s.minScrollTop,o=1):(n=s.maxScrollTop,o=-1),m=(o*j-Math.sqrt(-2*k*Math.abs(n-g)+j*j))/k,p=j-k*m,q=.008*(p/Math.abs(p)),t=p/q,u=n+p*t/2,v=m+t+400;var y=l({v:j,a:-k,t:m}).generateCubicBezier(),z=l({v:p,a:-q,t:t}).generateCubicBezier();a.style.webkitTransition="-webkit-transform "+(m/1e3).toFixed(2)+"s cubic-bezier("+y+") 0",a.style.webkitTransform="translateY("+n.toFixed(0)+"px)",a.addEventListener("webkitTransitionEnd",function(){a.removeEventListener("webkitTransitionEnd",arguments.callee),a.style.webkitTransition="-webkit-transform "+(t/1e3).toFixed(2)+"s cubic-bezier("+z+") 0",a.style.webkitTransform="translateY("+u.toFixed(0)+"px)",a.addEventListener("webkitTransitionEnd",function(){a.removeEventListener("webkitTransitionEnd",arguments.callee),a.style.webkitTransition="-webkit-transform 0.4s ease 0",a.style.webkitTransform="translateY("+n.toFixed(0)+"px)",a.addEventListener("webkitTransitionEnd",r,!1)},!1)},!1)}else{{l({v:c,a:-d,t:f}).generateCubicBezier()}a.style.webkitTransition="-webkit-transform "+(f/1e3).toFixed(2)+"s ease 0",a.style.webkitTransform="translateY("+i.toFixed(0)+"px)",a.addEventListener("webkitTransitionEnd",r,!1)}}}}function r(b){s.enabled&&!s.isStopBounce&&(b.stopPropagation(),s.cancelScrollEnd=!1,setTimeout(function(){s.cancelScrollEnd||(a.style.webkitBackfaceVisibility="",a.style.webkitTransformStyle="",a.style.webkitAnimation="",g(s,"scrollend"))},10))}var s=this;b=b||{},b.bounceOffset=b.bounceOffset||{top:0,bottom:0},this.options=b,this.element=a,this.viewport=a.parentNode,this.viewport.addEventListener("touchstart",j,!1),this.viewport.addEventListener("touchend",k,!1),this.viewport.addEventListener("panstart",m,!1),this.viewport.addEventListener("pan",o,!1),this.viewport.addEventListener("panend",p,!1),this.viewport.addEventListener("flick",q,!1),this.viewport.scrollId=setTimeout(function(){n[s.viewport.scrollId+""]=s},0)}var k=a.document,l=(k.documentElement,b.motion),m=!1,n={},o="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,p={enable:function(){this.enabled=!0,m||(m=!0,k.addEventListener("touchmove",function(a){return a.preventDefault(),!1},!1))},disable:function(){var a=this.element;this.enabled=!1,setTimeout(function(){a.style.webkitTransform=getComputedStyle(a).webkitTransform,a.style.webkitAnimation=""},50)},getScrollHeight:function(){return this.element.getBoundingClientRect().height-(this.options.bounceOffset.top||0)-(this.options.bounceOffset.bottom||0)},getScrollTop:function(){return-h(this).y-(this.options.bounceOffset.top||0)},refresh:function(){var a=this.element;a.style.height="auto",a.style.height=a.offsetHeight+"px",this.transformOffset=h(this),this.minScrollTop=c(this),this.maxScrollTop=d(this),this.scrollTo(-this.transformOffset.y-(this.options.bounceOffset.top||0))},offset:function(a){var b=this.element.getBoundingClientRect(),c=a.getBoundingClientRect(),d={top:c.top-((this.options.bounceOffset.top||0)+b.top),left:c.left-b.left,right:b.right-c.right,width:c.width,height:c.height};return d.bottom=d.top+c.height,d},scrollTo:function(a){var b=h(this).x;a=-a-(this.options.bounceOffset.top||0),a=f(this,a),this.element.style.webkitAnimation="",this.element.style.webkitTransform=i(b,a)},scrollToElement:function(a){var b=this.offset(a);this.scrollTo(b.top)},getViewHeight:function(){return this.viewport.getBoundingClientRect().height},getTransformOffset:function(){return h(this)},getBoundaryOffset:function(){var a=h(this).y;return Math.abs(e(this,a)||0)},stopBounce:function(){isStopBounce=!0,this.element.style.webkitTransition="";var a=h(this),b=this.options.bounceOffset,e=c(this),f=d(this),g=a.x,j=a.y;j=j>e+(b.top||0)?e+(b.top||0):j<f-(b.bottom||0)?f-(b.bottom||0):null,null!=j&&setTimeout(function(){this.element.style.webkitTransform=i(g,j),this.element.style.webkitTansition="-webkit-transform 0.4s ease 0"},10)},resumeBounce:function(){isStopBounce=!1;var a=(h(this),c(this)),b=d(this),e=transformOffset.x,f=transformOffset.y;f=f>a?a:b>f?b:null,null!=f&&setTimeout(function(){this.element.style.webkitTransform=i(e,f),this.element.style.webkitTansition="-webkit-transform 0.4s ease 0"},10)}};for(var q in p)j.prototype[q]=p[q];b.scroll=function(a,b){if(!a.parentElement)throw new Error("wrong dom tree");var c;return c=a.parentElement.scrollId?n[a.parentElement.scrollId]:new j(a,b),c.enable(),c.refresh(),c}}(window,window.lib||(window.lib={}));