!function(a,b){function c(){b.scroll.outputDebugLog&&console.debug.apply(console,arguments)}function d(a){return 0-(a.options[a.axis+"Padding1"]||0)}function e(a){var b=a.element.getBoundingClientRect(),c=a.viewport.getBoundingClientRect(),e=d(a);if("y"===a.axis)var f=0-b.height+c.height;else var f=0-b.width+c.width;return Math.min(f+(a.options[a.axis+"Padding2"]||0),e)}function f(a,b){return b>a.minScrollOffset?b-a.minScrollOffset:b<a.maxScrollOffset?b-a.maxScrollOffset:void 0}function g(a,b){return b>a.minScrollOffset?b=a.minScrollOffset:b<a.maxScrollOffset&&(b=a.maxScrollOffset),b}function h(a,b,d){c(b,d);var e=l.createEvent("HTMLEvents");if(e.initEvent(b,!1,!0),e.scrollObj=a,d)for(var f in d)e[f]=d[f];a.element.dispatchEvent(e)}function i(a){var b,c={x:0,y:0},d=getComputedStyle(a.element).webkitTransform;return"none"!==d&&(b=d.match(/^matrix3d\(\d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, ([-\d.]+), ([-\d.]+), [-\d.]+, \d+\)/)||d.match(/^matrix\(\d+, \d+, \d+, \d+, ([-\d.]+), ([-\d.]+)\)$/))&&(c.x=parseInt(b[1])||0,c.y=parseInt(b[2])||0),c}function j(a,b){return q?"translate3d("+a+"px, "+b+"px, 0)":"translate("+a+"px, "+b+"px)"}function k(a,b){function k(a){return a.preventScrollendClick=A,A?(a.preventDefault(),a.stopPropagation(),!1):!0}function l(a,b){B=null,clearTimeout(C),C=setTimeout(function(){B&&(B=null,r(a))},b||400),B=a}function o(){y.enabled&&(y.isScrolling&&x(),a.style.webkitBackfaceVisibility="hidden",a.style.webkitTransformStyle="preserve-3d",a.style.webkitTransform=getComputedStyle(a).webkitTransform,a.style.webkitTransition="",B=null,clearTimeout(C))}function q(){if(y.enabled){var c=i(y)[y.axis],d=!!b.bounceOffset,e=f(y,c),j=y.options[y.axis+"Padding1"],k=y.options[y.axis+"Padding2"];if(""===a.style.webkitTransition&&e){var m;d&&e>0&&j&&Math.abs(e)>j/2?(m=y.minScrollOffset+j,l(function(){h(y,"y"===y.axis?"pulldownend":"pullrightend")},400)):d&&0>e&&k&&Math.abs(e)>k/2?(m=y.maxScrollOffset-k,l(function(){h(y,"y"===y.axis?"pullupend":"pullleftend")},400)):(m=g(y,c),l(x,400)),a.style.webkitTransition="-webkit-transform 0.4s ease 0",a.style.webkitTransform="translate"+y.axis.toUpperCase()+"("+m.toFixed(0)+"px)"}else y.isScrolling&&x()}}function t(a){y.enabled&&(("y"===y.axis&&a.isVertical||"x"===y.axis&&!a.isVertical)&&a.stopPropagation(),y.transformOffset=i(y),y.minScrollOffset=d(y),y.maxScrollOffset=e(y),y.panFixRatio=2.5,D=!0,y.isScrolling=!0,h(y,"scrollstart"))}function u(b){if(y.enabled&&("y"===y.axis&&b.isVertical||"x"===y.axis&&!b.isVertical)){b.stopPropagation();var c=y.transformOffset[y.axis]+b["displacement"+y.axis.toUpperCase()];c>y.minScrollOffset?(c=y.minScrollOffset+(c-y.minScrollOffset)/y.panFixRatio,y.panFixRatio*=1.003):c<y.maxScrollOffset&&(c=y.maxScrollOffset-(y.maxScrollOffset-c)/y.panFixRatio,y.panFixRatio*=1.003),y.panFixRatio>4&&(y.panFixRatio=4);var d=f(y,c);d&&(h(y,d>0?"y"===y.axis?"pulldown":"pullright":"y"===y.axis?"pullup":"pullleft",{boundaryOffset:Math.abs(d)}),y.options.noBounce&&(c=g(y,c))),a.style.webkitTransition="",a.style.webkitTransform="y"===y.axis?j(y.transformOffset.x,c):j(c,y.transformOffset.y),y.fireScrollingEvent&&h(y,"scrolling")}}function v(a){y.enabled&&("y"===y.axis&&a.isVertical||"x"===y.axis&&!a.isVertical)&&a.stopPropagation()}function w(d){if(y.enabled&&("y"===y.axis&&d.isVertical||"x"===y.axis&&!d.isVertical)){d.stopPropagation(),D=!0;var e,j,k,n,o,q,s,t,u,v,w,z,A,B,C,E,F;n=i(y)[y.axis];var G=f(y,n);if(!G){e=d["velocity"+y.axis.toUpperCase()];var H=2,I=.0015;b.inertia&&p[b.inertia]&&(H=p[b.inertia][0],I=p[b.inertia][1]),e>H&&(e=H),-H>e&&(e=-H),j=I*(e/Math.abs(e)),q=m({v:e,a:-j}),k=q.t,o=n+q.s;var J=f(y,o);if(J)c("惯性计算超出了边缘",J),b.noBounce?(c("没有回弹效果"),v=g(y,o),a.style.webkitTransition="-webkit-transform 0.4s ease-out 0",a.style.webkitTransform="translate"+y.axis.toUpperCase()+"("+v.toFixed(0)+"px)",l(x,400)):(s=e,t=j,J>0?(v=y.minScrollOffset,z=1):(v=y.maxScrollOffset,z=-1),w=m({v:z*s,a:-z*t,s:Math.abs(v-n)}),u=w.t,A=s-t*u,B=.03*(A/Math.abs(A)),F=m({v:A,a:-B}),C=F.t,E=v+F.s,a.style.webkitTransition="-webkit-transform "+((u+C)/1e3).toFixed(2)+"s ease-out 0",a.style.webkitTransform="translate"+y.axis.toUpperCase()+"("+E.toFixed(0)+"px)",c("惯性滚动","s="+E.toFixed(0),"t="+((u+C)/1e3).toFixed(2)),l(function(){a.style.webkitTransition="-webkit-transform 0.4s ease 0",a.style.webkitTransform="translate"+y.axis.toUpperCase()+"("+v.toFixed(0)+"px)",c("惯性回弹","s="+v.toFixed(0),"t=400"),l(x,400)},1e3*((u+C)/1e3).toFixed(2)));else{c("惯性计算没有超出了边缘");var K=q.generateCubicBezier();a.style.webkitTransition="-webkit-transform "+(k/1e3).toFixed(2)+"s cubic-bezier("+K+") 0",a.style.webkitTransform="translate"+y.axis.toUpperCase()+"("+o.toFixed(0)+"px)",l(x,1e3*(k/1e3).toFixed(2))}y.fireScrollingEvent&&r(function(){y.isScrolling&&(h(y,"scrolling"),r(arguments.callee))})}}}function x(){y.enabled&&(D=!1,setTimeout(function(){D||(y.isScrolling=!1,a.style.webkitTransition="",h(y,"scrollend"))},50))}var y=this;if(b=b||{},b.noBounce=!!b.noBounce,b.isPrevent=null==b.isPrevent?!0:!!b.isPrevent,b.isFixScrollendClick=null==b.isFixScrollendClick?!0:!!b.isFixScrollendClick,b.padding&&(b.yPadding1=-b.padding.top||0,b.yPadding2=-b.padding.bottom||0,b.xPadding1=-b.padding.left||0,b.xPadding2=-b.padding.right||0),b.bounceOffset&&(b.yPadding1=b.bounceOffset.top||0,b.yPadding2=b.bounceOffset.bottom||0,b.xPadding1=b.bounceOffset.left||0,b.xPadding2=b.bounceOffset.right||0),b.direction=b.direction||"y",b.inertia=b.inertia||"normal",this.options=b,y.axis=b.direction,this.element=a,this.viewport=a.parentNode,this.plugins={},this.viewport.addEventListener("touchstart",o,!1),this.viewport.addEventListener("touchend",q,!1),this.viewport.addEventListener("touchcancel",q,!1),this.viewport.addEventListener("panstart",t,!1),this.viewport.addEventListener("pan",u,!1),this.viewport.addEventListener("panend",v,!1),this.viewport.addEventListener("flick",w,!1),this.element.scrollId=setTimeout(function(){n[y.element.scrollId+""]=y},1),b.isPrevent){var z="y"===this.axis?"vertical":"horizontal";this.viewport.addEventListener(z+"panstart",function(){s=!0},!1),y.viewport.addEventListener("panend",function(){s=!1},!1)}if(b.isFixScrollendClick){var A;this.viewport.addEventListener("touchstart",function(){y.isScrolling&&(A=!0)},!1),this.viewport.addEventListener("scrollend",function(){setTimeout(function(){A=!1},400)},!1),this.viewport.addEventListener("click",k,!1),this.viewport.addEventListener("tap",k,!1)}var B,C=0;a.addEventListener("webkitTransitionEnd",function(a){if(B){var b=B;B=null,clearTimeout(C),r(function(){b(a)})}},!1);var D}var l=a.document,m=b.motion,n={},o={},p={normal:[2,.0015],slow:[1.5,.003],veryslow:[1.5,.005]},q="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(a){setTimeout(a,16)}}(),s=!1;l.addEventListener("touchmove",function(a){return s?(a.preventDefault(),!1):!0},!1);var t={init:function(){return this.enable(),this.refresh(),this.scrollTo(0),this},enable:function(){return this.enabled=!0,this},disable:function(){var a=this.element;return this.enabled=!1,r(function(){a.style.webkitTransform=getComputedStyle(a).webkitTransform}),this},getScrollWidth:function(){return this.element.getBoundingClientRect().width-(this.options.xPadding1||0)-(this.options.xPadding2||0)},getScrollHeight:function(){return this.element.getBoundingClientRect().height-(this.options.yPadding1||0)-(this.options.yPadding2||0)},getScrollLeft:function(){return-i(this).x-(this.options.xPadding1||0)},getScrollTop:function(){return-i(this).y-(this.options.yPadding1||0)},refresh:function(){var a=this.element;if("y"===this.axis){var b=a.firstElementChild;if(b){for(a.style.height="auto";b&&!b.getBoundingClientRect().height;)b=b.nextElementSibling;for(var c=a.lastElementChild;c&&!c.getBoundingClientRect().height;)c=c.previousElementSibling;a.style.height=(this.options.height||(c&&c.getBoundingClientRect().bottom||0)-(b&&b.getBoundingClientRect().top||0))+"px"}else a.style.height=a.getBoundingClientRect().height}else{var b=a.firstElementChild;if(b){for(a.style.width="auto";b&&!b.getBoundingClientRect().width;)b=b.nextElementSibling;for(var c=a.lastElementChild;c&&!c.getBoundingClientRect().width;)c=c.previousElementSibling;a.style.width=(this.options.width||(c&&c.getBoundingClientRect().right||0)-(b&&b.getBoundingClientRect().left||0))+"px"}else a.style.width=a.getBoundingClientRect().width}return this.transformOffset=i(this),this.minScrollOffset=d(this),this.maxScrollOffset=e(this),this.scrollTo(-this.transformOffset[this.axis]-(this.options[this.axis+"Padding1"]||0)),this},offset:function(a){var b=this.element.getBoundingClientRect(),c=a.getBoundingClientRect();if("y"===this.axis){var d={top:c.top-((this.options.yPadding1||0)+b.top),left:c.left-b.left,right:b.right-c.right,width:c.width,height:c.height};d.bottom=d.top+d.height}else{var d={top:c.top-b.top,bottom:b.bottom-c.bottom,left:c.left-((this.options.xPadding1||0)+b.left),width:c.width,height:c.height};d.right=d.left+d.width}return d},getRect:function(a){var b=this.viewport.getBoundingClientRect(),c=a.getBoundingClientRect();if("y"===this.axis){var d={top:c.top-((this.options.yPadding1||0)+b.top),left:c.left-b.left,right:b.right-c.right,width:c.width,height:c.height};d.bottom=d.top+d.height}else{var d={top:c.top-b.top,bottom:b.bottom-c.bottom,left:c.left-((this.options.xPadding1||0)+b.left),width:c.width,height:c.height};d.right=d.left+d.width}return d},isInView:function(a){var b=this.viewport.getBoundingClientRect(),c=this.getRect(a);return"y"===this.axis?b.top<c.bottom&&b.bottom>c.top:b.left<c.right&&b.right>c.left},scrollTo:function(a,b){var c=this.element;return a=-a-(this.options[this.axis+"Padding1"]||0),a=g(this,a),b===!0?(c.style.webkitTransition="-webkit-transform 0.4s ease 0",c.addEventListener("webkitTransitionEnd",function(){c.style.webkitTransition=""},!1)):c.style.webkitTransition="",c.style.webkitTransform="y"===this.axis?j(i(this).x,a):j(a,i(this).y),this},scrollToElement:function(a,b){var c=this.offset(a);return this.scrollTo("y"===this.axis?c.top:c.left,b)},getViewWidth:function(){return this.viewport.getBoundingClientRect().width},getViewHeight:function(){return this.viewport.getBoundingClientRect().height},addPulldownHandler:function(a){var b=this;return this.element.addEventListener("pulldownend",function(c){b.disable(),a(c,function(){b.enable()})},!1),this},addPullupHandler:function(a){var b=this;return this.element.addEventListener("pullupend",function(c){b.disable(),a(c,function(){b.enable()})},!1),this},addScrollstartHandler:function(a){return this.element.addEventListener("scrollstart",function(b){a(b)},!1),this},addScrollingHandler:function(a){if(!this.fireScrollingEvent){this.fireScrollingEvent=!0;var b=l.createElement("div");b.className="force-refresh",b.style.cssText="position: absolute; top: 0; left: 0; width: 0; height: 0; font-size: 0; opacity: 1;",this.viewport.appendChild(b),this.element.addEventListener("scrolling",function(){b.style.opacity=Math.abs(parseInt(b.style.opacity)-1)+""},!1)}return this.element.addEventListener("scrolling",function(b){a(b)},!1),this},addScrollendHandler:function(a){return this.element.addEventListener("scrollend",function(b){a(b)},!1),this},enablePlugin:function(a,b){var c=o[a];if(c&&!this.plugins[a]){b=b||{};for(var d in b)this.options[d]=b[d];this.plugins[a]=c.apply(this)}return this}};for(var u in t)k.prototype[u]=t[u];b.scroll=function(a,b){if(1===arguments.length&&!(arguments[0]instanceof HTMLElement))if(b=arguments[0],b.scrollElement)a=b.scrollElement;else{if(!b.scrollWrap)throw new Error("no scroll element");a=b.scrollWrap.firstElementChild}if(!a.parentNode)throw new Error("wrong dom tree");if(b&&b.direction&&["x","y"].indexOf(b.direction)<0)throw new Error("wrong direction");var c;return c=a.scrollId?n[a.scrollId]:new k(a,b)},b.scroll.plugin=function(a,b){return b?(o[a]=b,void 0):o[a]}}(window,window.lib||(window.lib={}));