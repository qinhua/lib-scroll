<html data-dpr="1">
<head>
	<meta charset="utf-8">
	<title>搜索宝贝</title>
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
	<meta content="yes" name="apple-mobile-web-app-capable">
	<meta content="black" name="apple-mobile-web-app-status-bar-style">
	<meta name="format-detection" content="telephone=no">
    <link href="http://gtms02.alicdn.com/tps/i2/TB1nmqyFFXXXXcQbFXXE5jB3XXX-114-114.png" rel="apple-touch-icon-precomposed">
    <link href="http://gtms02.alicdn.com/tps/i2/TB1nmqyFFXXXXcQbFXXE5jB3XXX-114-114.png" rel="Shortcut Icon" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="http://g.tbcdn.cn/mtb/??ctrl-loading/0.1.2/loading.css,ctrl-tabheader/0.4.2/tabheader.css">
    <link rel="stylesheet" type="text/css" href="index.css">
    <style>
    html {
        font-size: 20px;
    }

    body {
        font-size: 12px;
    }

    html,body,#wrap {
        padding: 0;
        margin: 0;
        height: 100%;
        overflow: hidden;
        background: #FFF;
    }

    .J_FilterBarContainer {
        width: 100%;
        height:32px;
    }
    .filter-bar {
        width: 100%;
        height: 32px;
    }
    .filter-bar .sort-tab {
        display: -webkit-box;
    }
    .filter-bar .sort-tab li {
        display: block;
        width: 80px;
        box-sizing: border-box;
    }
    .filter-bar .sort-tab {
        overflow: hidden;
        display: -webkit-box;
    }

    .filter-bar .sort-tab li {
        width: 80px;
        display: block;
    }
    </style>
</head>
<body scroll="none">
<div id="wrap">
    <div id="tbh5v0" class="mytaobao">
        <div class="toolbar">
            <div class="J_RellkeyContainer">
                <div class="rellkey">
                    <ul>
                        <li>港版</li>
                        <li>日版</li>
                        <li>苹果</li>
                        <li>电信</li>
                        <li>美版</li>
                        <li>国行</li>
                        <li>三网</li>
                        <li>手机</li>
                        <li>无锁</li>
                    </ul>
                </div>
            </div>
            
            <div class="J_FilterBarContainer">
                <div class="filter-bar sticky">

                </div>
            </div>
        </div>

        <div id="bodyCont" class="screen-wrap fullscreen searchlist">
            <div class="search-content">
                <div class="search-list list-view" id="J_SearchList">
                    <ul id="list-wrap"></ul>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/template" id="headerTpl">
    <header class="top-bar" id="J_Header">
        <div class="top-bar-w">
            <a class="logo" href="http://m.taobao.com">
                <div class="icons-taobao-logo"></div>
            </a>
            <div class="top-bar-c">
                <div class="s-input-select">
                    <div class="s-input-tab">
                        <div class="s-input-tab-txt">宝贝</div>
                        <div class="s-input-tab-nav off" id="J_TabNav">
                            <ul>
                                <li class="all">宝贝</li>
                                <li class="shop">店铺</li>
                                <li class="tmall">天猫</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="top-bar-e">
                <span class="s-tab-btn sub" id="J_selt">分类</span>
                <span class="s-tab-btn sort" id="J_sift">筛选</span>
            </div>
            <div class="top-bar-btn closed">取消</div>
        </div>
    </header>
</script>
<script type="text/template" id="itemTpl">
    <li>
        <div class="list-item">
            <div class="p">
                <a href="http://mclick.simba.taobao.com/cc_im?p=iphone5s&amp;s=384300457&amp;k=269&amp;e=Bf52Czfzg4zEzEYXHF1ZrjhZAekQJJP1K4M14jql2z%2F1lYR6JgolkyoCZbepooNsYHcE2byB58uPEB5nyzmdRlFplfhdyusoNBrETXawvQ6BF7KUbKK962nsBJEbCRNEQA7w4cN%2F10pIouaYhvJponIUuKyCq5k8UWTc1rhquXcHnpuCFIjDVpsXMwjxx%2BxkzeiRu%2Bi0WaRELmURVnaN47Cr9H8IhjN4YT2aULWczh7FPRTaiMoo3quVwCSMOmdelXji%2B%2BqulpI%3D" title=""><img class="p-pic lazy" data-src="http://gma.alicdn.com/tfscom/i2/11031028964676638/T1WMPDFlVbXXXXXXXX_!!0-item_pic.jpg_210x210.jpg" style="visibility: visible;"></a>
            </div>
            <div class="d">
                <a href="http://mclick.simba.taobao.com/cc_im?p=iphone5s&amp;s=384300457&amp;k=269&amp;e=Bf52Czfzg4zEzEYXHF1ZrjhZAekQJJP1K4M14jql2z%2F1lYR6JgolkyoCZbepooNsYHcE2byB58uPEB5nyzmdRlFplfhdyusoNBrETXawvQ6BF7KUbKK962nsBJEbCRNEQA7w4cN%2F10pIouaYhvJponIUuKyCq5k8UWTc1rhquXcHnpuCFIjDVpsXMwjxx%2BxkzeiRu%2Bi0WaRELmURVnaN47Cr9H8IhjN4YT2aULWczh7FPRTaiMoo3quVwCSMOmdelXji%2B%2BqulpI%3D" title="">
                    <h3 class="d-title"> iPhone 5s 香港商家 原封未激活 百分百原装</h3>
                </a>
                <p class="d-price">
                    <em class="h">￥4198</em><del>￥4498</del>
                </p>
                <div class="d-main">
                    <p class="d-freight">免运费</p>
                    <p class="d-num">828人购买</p>
                    <p class="d-area">香港</p>
                </div>
            </div>
        </div>
    </li>
</script>
<script src="http://g.tbcdn.cn/mtb/??lib-motion/1.0.1/motion.debug.js,lib-gesture/1.1.4/gesture.debug.js,ctrl-loading/0.1.2/loading.debug.js,ctrl-tabheader/0.4.2/tabheader.debug.js" type="text/javascript"></script>
<script src="build/scroll.debug.js" type="text/javascript"></script>
<script src="build/plugin.debug.js" type="text/javascript"></script>
<script>
lib.scroll.outputDebugLog = true;

function genItems() {
    var html = new Array(10).join(tpl);
    var wrap = document.createElement('div');
    wrap.innerHTML = html;
    var fragment = document.createDocumentFragment();

    while (wrap.children.length) {
        fragment.appendChild(wrap.firstElementChild);
    }

    return fragment;
}

// 初始化列表
var tpl = document.getElementById('itemTpl').innerHTML;
var listUl = document.getElementById('list-wrap');
listUl.appendChild(genItems());

// 列表的滚动功能
var listScroller = lib.scroll({
    scrollElement: document.getElementById('tbh5v0'),
    padding: {
        top: 48,
        bottom: 40
    },
    inertia: 'slow'
}).init();

// 顶部固定
listScroller.enablePlugin('fixed', {
    topElement: document.getElementById('headerTpl').innerHTML
})

// 懒加载
listScroller.enablePlugin('lazyload', {
    realTimeLoad: false
});


// 吸顶元素
listScroller.enablePlugin('sticky');

// 下拉刷新
var refreshLoading = new ctrl.loading();
refreshLoading.arrowDirection = 'down';
refreshLoading.mode = 'draw';
refreshLoading.text = '下拉即可刷新...';

listScroller.enablePlugin('refresh', {
    element: refreshLoading.element,    
    height: 60,
    onpull: function(top) {
        refreshLoading.per = Math.round(top/60 * 100);
    },
    onrefresh: function(done) {
        var that = this;
        refreshLoading.text = '正在刷新...';
        refreshLoading.mode = 'spin';
        setTimeout(function() {
            listUl.innerHTML = '';
            listUl.appendChild(genItems());
            done();
            refreshLoading.text = '下拉即可刷新...';
            refreshLoading.mode = 'draw';
        }, 1000);
    }
});

// 上拉加载更多
var updateLoading = new ctrl.loading();
updateLoading.arrowDirection = 'up';
updateLoading.text = '上拉加载更多...';
updateLoading.mode = 'draw';
updateLoading.per = 100;

listScroller.enablePlugin('update', {
    element: updateLoading.element,
    height: 40,
    onupdate: function(done) {
        var that = this;
        updateLoading.text = '正在加载...';
        updateLoading.mode = 'spin';
        setTimeout(function() {
            that.disable();
            listUl.appendChild(genItems());
            that.enable();
            done();
            updateLoading.text = '上拉加载更多...';
            updateLoading.mode = 'draw';
            updateLoading.per = 100;
        }, 1000);
    }
});

// 筛选的bar
var tabheader = new ctrl.tabheader();
document.querySelector('.filter-bar').appendChild(tabheader.root);
tabheader.viewModel = [
    {text: '默认'},
    {text: '销量'},
    {text: '价格'},
    {text: '信用'},
    {text: '相关'},
    {text: '最近'}
]
</script>
</body>
</html>