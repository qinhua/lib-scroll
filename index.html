<html>
<head>
	<meta charset="utf-8">
	<title>搜索宝贝</title>
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
	<meta content="yes" name="apple-mobile-web-app-capable">
	<meta content="black" name="apple-mobile-web-app-status-bar-style">
	<meta name="format-detection" content="telephone=no">
    <link href="http://gtms02.alicdn.com/tps/i2/TB1nmqyFFXXXXcQbFXXE5jB3XXX-114-114.png" rel="apple-touch-icon-precomposed">
    <link href="http://gtms02.alicdn.com/tps/i2/TB1nmqyFFXXXXcQbFXXE5jB3XXX-114-114.png" rel="Shortcut Icon" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="http://zx.x.taobao.net/h5ctrl/loading/build/loading1x.css">
    <link rel="stylesheet" type="text/css" href="index.css">
    <style>
    html,body,#wrap {
        padding: 0;
        margin: 0;
        height: 100%;
        overflow: hidden;
        background: #FFF;
    }

    .J_FilterBarContainer {
        width: 100%;
        height:32px;
    }
    .filter-bar {
        width: 100%;
        height: 32px;
        overflow: hidden;
    }
    .filter-bar .sort-tab {
        display: -webkit-box;
    }
    .filter-bar .sort-tab li {
        display: block;
        width: 80px;
        box-sizing: border-box;
    }
    .filter-bar .sort-tab {
        overflow: hidden;
        display: -webkit-box;
    }

    .filter-bar .sort-tab li {
        width: 80px;
        display: block;
    }
    </style>
</head>
<body scroll="none">
<div id="wrap">
    <div id="tbh5v0" class="mytaobao">
        <div class="toolbar">
            <div class="J_RellkeyContainer">
                <div class="rellkey">
                    <ul>
                        <li>港版</li>
                        <li>日版</li>
                        <li>苹果</li>
                        <li>电信</li>
                        <li>美版</li>
                        <li>国行</li>
                        <li>三网</li>
                        <li>手机</li>
                        <li>无锁</li>
                    </ul>
                </div>
            </div>
            
            <div class="J_FilterBarContainer">
                <div class="filter-bar sticky">
                    <ul class="sort-tab J_sortTab">
                        <li data-value="" class="selected">默认</li>
                        <li data-value="_sale">销量</li>
                        <li data-value="bid">价格</li>
                        <li data-value="">信用</li>
                        <li data-value="_sale">相关</li>
                        <li data-value="bid">最近</li>
                    </ul>
                </div>
            </div>
        </div>

        <div id="bodyCont" class="screen-wrap fullscreen searchlist">
            <div class="search-content">
                <div class="search-list list-view" id="J_SearchList">
                    <ul id="list-wrap"></ul>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/template" id="headerTpl">
    <header class="top-bar" id="J_Header">
        <div class="top-bar-w">
            <a class="logo" href="http://m.taobao.com">
                <div class="icons-taobao-logo"></div>
            </a>
            <div class="top-bar-c">
                <div class="s-input-select">
                    <div class="s-input-tab">
                        <div class="s-input-tab-txt">宝贝</div>
                        <div class="s-input-tab-nav off" id="J_TabNav">
                            <ul>
                                <li class="all">宝贝</li>
                                <li class="shop">店铺</li>
                                <li class="tmall">天猫</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="top-bar-e">
                <span class="s-tab-btn sub" id="J_selt">分类</span>
                <span class="s-tab-btn sort" id="J_sift">筛选</span>
            </div>
            <div class="top-bar-btn closed">取消</div>
        </div>
    </header>
</script>
<script type="text/template" id="itemTpl">
    <li>
        <div class="list-item">
            <div class="p">
                <a href="http://mclick.simba.taobao.com/cc_im?p=iphone5s&amp;s=384300457&amp;k=269&amp;e=Bf52Czfzg4zEzEYXHF1ZrjhZAekQJJP1K4M14jql2z%2F1lYR6JgolkyoCZbepooNsYHcE2byB58uPEB5nyzmdRlFplfhdyusoNBrETXawvQ6BF7KUbKK962nsBJEbCRNEQA7w4cN%2F10pIouaYhvJponIUuKyCq5k8UWTc1rhquXcHnpuCFIjDVpsXMwjxx%2BxkzeiRu%2Bi0WaRELmURVnaN47Cr9H8IhjN4YT2aULWczh7FPRTaiMoo3quVwCSMOmdelXji%2B%2BqulpI%3D" title=""><img class="p-pic lazy" data-src="http://gma.alicdn.com/tfscom/i2/11031028964676638/T1WMPDFlVbXXXXXXXX_!!0-item_pic.jpg_210x210.jpg" style="visibility: visible;"></a>
            </div>
            <div class="d">
                <a href="http://mclick.simba.taobao.com/cc_im?p=iphone5s&amp;s=384300457&amp;k=269&amp;e=Bf52Czfzg4zEzEYXHF1ZrjhZAekQJJP1K4M14jql2z%2F1lYR6JgolkyoCZbepooNsYHcE2byB58uPEB5nyzmdRlFplfhdyusoNBrETXawvQ6BF7KUbKK962nsBJEbCRNEQA7w4cN%2F10pIouaYhvJponIUuKyCq5k8UWTc1rhquXcHnpuCFIjDVpsXMwjxx%2BxkzeiRu%2Bi0WaRELmURVnaN47Cr9H8IhjN4YT2aULWczh7FPRTaiMoo3quVwCSMOmdelXji%2B%2BqulpI%3D" title="">
                    <h3 class="d-title"> iPhone 5s 香港商家 原封未激活 百分百原装</h3>
                </a>
                <p class="d-price">
                    <em class="h">￥4198</em><del>￥4498</del>
                </p>
                <div class="d-main">
                    <p class="d-freight">免运费</p>
                    <p class="d-num">828人购买</p>
                    <p class="d-area">香港</p>
                </div>
            </div>
        </div>
    </li>
</script>
<script src="http://zx.x.taobao.net/h5ctrl/loading/build/loading.debug.js"></script>
<script src="build/combo.debug.js" type="text/javascript"></script>
<script src="build/scroll.debug.js" type="text/javascript"></script>
<script src="build/plugin.debug.js" type="text/javascript"></script>
<script>
var tpl = document.getElementById('itemTpl').innerHTML;
var listUl = document.getElementById('list-wrap');

function genItems() {
    var html = new Array(10).join(tpl);
    var wrap = document.createElement('div');
    wrap.innerHTML = html;
    var fragment = document.createDocumentFragment();

    while (wrap.children.length) {
        fragment.appendChild(wrap.firstElementChild);
    }

    return fragment;
}
listUl.appendChild(genItems());

lib.scroll.outputDebugLog = true;

var listScroller = lib.scroll({
    scrollElement: document.getElementById('tbh5v0'),
    padding: {
        top: 48,
        bottom: 20
    },
    inertia: 'slow'
}).init();

listScroller.enablePlugin('fixed', {
    topElement: document.getElementById('headerTpl').innerHTML
})

listScroller.enablePlugin('lazyload', {
    realTimeLoad: false
});

listScroller.enablePlugin('sticky');


var refreshLoading = new ctrl.loading();
refreshLoading.arrowDirection = 'down';
refreshLoading.mode = 'draw';
refreshLoading.text = '下拉即可刷新...';

listScroller.enablePlugin('refresh', {
    element: refreshLoading.element,    
    height: 40,
    onpull: function(top) {
        refreshLoading.per = top/40;
    },
    onrefresh: function(done) {
        var that = this;
        refreshLoading.text = '正在刷新...';
        refreshLoading.mode = 'spin';
        setTimeout(function() {
            listUl.innerHTML = '';
            listUl.appendChild(genItems());
            done();
            refreshLoading.text = '下拉即可刷新...';
            refreshLoading.mode = 'draw';
        }, 1000);
    }
});

var el = document.createElement('div');
el.className = 'J_BottomLoading loading'
el.innerHTML = '<span></span>努力加载中';

listScroller.enablePlugin('update', {
    element: el,
    height: 30,
    onupdate: function(done) {
        el.innerHTML = '<span></span>正在加载...';
        setTimeout(function() {
            listUl.appendChild(genItems());
            el.innerHTML = '<span></span>努力加载中';
            done();
        }, 1000);
    }
});

var barScroller = lib.scroll({
    scrollWrap: document.querySelector('.filter-bar'),
    direction: 'x',
    noBounce: false
}).init();
</script>
</body>
</html>